<div class="page" data-name="expenses">
  <div class="navbar safe-areas safe-areas-top">
    <div class="navbar-inner">
      <div class="left">
        <a href="#" class="link panel-open" data-panel="left">
          <i class="icon material-icons">menu</i>
        </a>
      </div>
      <div class="title">Gastos del Hogar</div>
      <div class="right">
        <!-- Agrega este botón de información -->
        <a href="#" class="link" id="info-button-expenses">
          <i class="icon material-icons">info</i>
        </a>
        <a href="/" class="link">
          <i class="icon material-icons">home</i>
        </a>
      </div>
    </div>
  </div>

  <div class="page-content" style="background-color: #f5f7fa;">
    <!-- Resumen de gastos -->
    <div class="card" style="background: white; border-radius: 12px; margin: 16px;">
      <div class="card-content card-content-padding">
        <!-- Barra de progreso del límite diario -->
        <div style="margin-bottom: 16px;">
          <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
            <span id="daily-limit" style="font-size: 12px; color: #00bcd4;"></span>
            <span id="today-expenses" style="font-weight: bold;"></span>
          </div>
          <div style="height: 6px; background-color: #f0f0f0; border-radius: 3px;">
            <div id="limit-progress-bar" style="height: 100%; border-radius: 3px; width: 0%;"></div>
          </div>
        </div>

        <div class="row" style="text-align: center;">
          <div class="col-33">
            <div style="color: #00bcd4; font-size: 12px;">HOY</div>
            <div style="font-size: 18px; font-weight: bold; color: #e74c3c;" id="today-expenses-amount">$0.00</div>
          </div>
          <div class="col-33">
            <div style="color: #00bcd4; font-size: 12px;" id="week-label">SEMANA</div>
            <div style="font-size: 18px; font-weight: bold; color: #e74c3c;" id="week-expenses">$0.00</div>
          </div>
          <div class="col-33">
            <div style="color: #00bcd4; font-size: 12px;" id="month-label">MES</div>
            <div style="font-size: 18px; font-weight: bold; color: #e74c3c;" id="month-expenses">$0.00</div>
          </div>
        </div>
      </div>
    </div>

    <div class="segmented" style="margin: 0 16px 16px;">
      <button class="button button-outline segmented-active" id="filter-today">Hoy</button>
      <button class="button button-outline" id="filter-week">Semana</button>
      <button class="button button-outline" id="filter-month">Mes</button>
      <button class="button button-outline" id="set-limit-btn">
        <i class="icon material-icons">settings</i>
      </button>
    </div>
    <div class="filter-feedback" style="margin: 0 16px 8px; text-align: center;">
      <small id="filter-feedback-text" style="color: #00bcd4; font-weight: bold;">
        Mostrando gastos de hoy
      </small>
    </div>

    <!-- Input oculto para el datepicker de filtro -->
    <input type="text" id="date-filter-input" style="display: none;">
    <input type="text" id="week-filter-input" style="display: none;">
    <input type="text" id="month-filter-input" style="display: none;">

    <!-- Estados -->
    <div id="loading-state-expense" class="block block-strong text-align-center" style="display: none;">
      <div class="preloader"></div>
      <p>Cargando gastos...</p>
    </div>

    <div id="empty-state-expense" class="block block-strong text-align-center" style="display: none;">

    </div>

    <!-- Lista de gastos -->
    <div class="block" id="expenses-list-container" style="margin: 0 16px; display: none;">
      <div class="card" style="margin: 0; border-radius: 12px; overflow: hidden;">
        <div class="card-content" style="padding: 0; height: 100%;">
          <div class="list media-list" style="margin: 0; height: 100%; overflow-y: auto;">
            <ul id="expenses-list" style="padding: 8px;"></ul>
          </div>
        </div>
      </div>
    </div>
    <!-- Botón flotante para agregar -->
    <div class="fab fab-right-bottom">
      <a href="#" class="button button-fill button-round" id="add-expense-fab" style="background-color: #00bcd4;">
        <i class="icon material-icons" style="color: white;">add</i>
      </a>
    </div>
  </div>

  <div class="popup expense-popup">
    <div class="view">
      <div class="page">
        <div class="navbar">
          <div class="navbar-inner">
            <div class="left">
              <a href="#" class="link popup-close">
                <i class="icon material-icons">close</i>
              </a>
            </div>
            <div class="title" id="popup-title-expense">Nuevo Gasto</div>
          </div>
        </div>
        <div class="page-content">
          <div class="list">
            <ul>
              <li class="item-content item-input">
                <div class="item-inner">
                  <div class="item-title item-label">Descripción</div>
                  <div class="item-input-wrap">
                    <input type="text" id="expense-description" placeholder="¿En qué gastaste?">
                  </div>
                </div>
              </li>
              <li class="item-content item-input">
                <div class="item-inner">
                  <div class="item-title item-label">Cantidad ($)</div>
                  <div class="item-input-wrap">
                    <input type="number" id="expense-amount" placeholder="0.00" step="0.01">
                  </div>
                </div>
              </li>
              <li class="item-content item-input">
                <div class="item-inner">
                  <div class="item-title item-label">Fecha</div>
                  <div class="item-input-wrap">
                    <input type="text" id="expense-date" placeholder="Seleccione fecha" readonly>
                  </div>
                </div>
              </li>
            </ul>
          </div>

          <div class="block">
            <input type="hidden" id="expense-id">
            <button type="button" class="button button-fill button-round color-blue" id="save-expense-btn" >
              Guardar
            </button>
            <div id="delete-btn-container-expenses" style="display: none; margin-top: 10px;">
              <button type="button" class="button button-fill button-round color-red" id="delete-expense-btn">
                Eliminar
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Popup de visualización de gasto -->
  <div class="popup view-expense-popup">
    <div class="view">
      <div class="page">
        <div class="navbar">
          <div class="navbar-inner">
            <div class="left">
              <a href="#" class="link popup-close">
                <i class="icon material-icons">close</i>
              </a>
            </div>
            <div class="title">Detalle del Gasto</div>
          </div>
        </div>
        <div class="page-content" style="padding-bottom: 0;">
          <div class="block" style="text-align: center; margin-top: 20px; padding-bottom: 0;">
            <!-- Círculo para el icono -->
            <div style="
            width: 80px;
            height: 80px;
            background: rgba(var(--category-color-rgb), 0.1);
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
          ">
              <div id="view-expense-icon" style="font-size: 36px;"></div>
            </div>

            <div id="view-expense-amount" style="
            font-size: 36px; 
            font-weight: bold; 
            margin-bottom: 5px;
            letter-spacing: -0.5px;
          "></div>
            <div id="view-expense-category" style="
            font-size: 18px; 
            margin-bottom: 20px; 
            color: #666;
            font-weight: 500;
          "></div>
          </div>

          <div class="card" style="
          margin: 0 16px;
          border-radius: 12px;
          box-shadow: none;
          border: 1px solid #f0f0f0;
          max-height: 50vh;
          overflow: hidden;
        ">
            <div class="card-content" style="padding: 0;">
              <div class="list" style="margin: 0;">
                <ul style="max-height: 50vh; overflow-y: auto;">
                  <li class="item-content" style="padding-left: 16px; align-items: flex-start;">
                    <div class="item-inner" style="
                    padding-right: 16px;
                    min-height: 60px;
                    padding-top: 16px;
                    padding-bottom: 16px;
                  ">
                      <div class="item-title" style="
                      font-size: 16px;
                      color: #888;
                      margin-bottom: 8px;
                    ">Descripción</div>
                      <div class="item-after" id="view-expense-description" style="
                      font-size: 18px;
                      font-weight: 500;
                      color: #333;
                      word-break: break-word;
                      white-space: pre-line;
                      max-width: 100%;
                    "></div>
                    </div>
                  </li>
                  <li class="item-content" style="padding-left: 16px;">
                    <div class="item-inner" style="
                    padding-right: 16px;
                    min-height: 60px;
                    padding-top: 16px;
                    padding-bottom: 16px;
                  ">
                      <div class="item-title" style="font-size: 16px; color: #888;">Fecha</div>
                      <div class="item-after" id="view-expense-date" style="
                      font-size: 18px;
                      font-weight: 500;
                      color: #333;
                    "></div>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
          </div>

          <div class="block" style="
  text-align: center;
  margin: 20px auto;
  padding: 0 16px;
  display: flex;
  justify-content: center;
">
            <a href="#" class="button button-fill popup-close" style="
    background-color: #f5f5f5;
    color: #333;
    border-radius: 8px;
    height: 48px;
    line-height: 48px;
    font-size: 16px;
    font-weight: 500;
    width: 100%;
    max-width: 300px;
    margin: 0 auto;
  ">
              Cerrar
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Popup de información sobre gastos -->
  <div class="popup info-popup-expenses popup-swipe-to-close">
    <div class="view">
      <div class="page">
        <div class="navbar">
          <div class="navbar-inner">
            <div class="left">
              <a href="#" class="link popup-close">
                <i class="icon material-icons">close</i>
              </a>
            </div>
            <div class="title">Guía de Gastos del Hogar</div>
          </div>
        </div>
        <div class="page-content">
          <!-- Introducción -->
          <div class="card info-card animate__animated animate__fadeInUp"
            style="margin: 16px; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 8px rgba(0,188,212,0.2);">
            <div class="card-header"
              style="background-color: #00bcd4; color: white; font-weight: 500; padding: 12px 16px;">
              <div style="display: flex; align-items: center; gap: 8px; line-height: 1;">
                <i class="icon material-icons"
                  style="font-size: 20px; display: inline-flex; align-items: center; justify-content: center;">help_outline</i>
                <span style="display: inline-flex; align-items: center;">¿Qué son los Gastos del Hogar?</span>
              </div>
            </div>
            <div class="card-content card-content-padding" style="padding: 16px;">
              <p style="margin: 0; color: #555; line-height: 1.5;">
                Los gastos del hogar son todos los desembolsos económicos que realizas para mantener tu casa y tu estilo
                de vida.
                Registrar cada gasto te ayudará a entender mejor tus finanzas y tomar decisiones más informadas.
              </p>
            </div>
          </div>

          <!-- Sección de consejos -->
          <div class="block animate__animated animate__fadeInUp animate__delay-1s" style="margin-top: 24px;">
            <h3
              style="color: #00bcd4; margin: 0 0 12px 16px; font-size: 18px; display: flex; align-items: center; gap: 8px;">
              <i class="icon material-icons">lightbulb_outline</i>
              <span>Consejos para Registrar Gastos</span>
            </h3>
            <div class="list accordion-list" style="margin: 0; border-radius: 12px; overflow: hidden;">
              <ul>
                <li class="accordion-item animate__animated animate__fadeIn" style="animation-delay: 0.1s;">
                  <a href="#" class="item-link item-content" style="padding-left: 16px;">
                    <div class="item-inner">
                      <div class="item-title" style="display: flex; align-items: center; gap: 8px;">
                        <i class="icon material-icons" style="color: #00bcd4;">description</i>
                        <span>Descripciones claras</span>
                      </div>
                    </div>
                  </a>
                  <div class="accordion-item-content">
                    <div class="block" style="padding: 12px 16px 12px 56px; background-color: #f5f5f5;">
                      <p style="margin: 0 0 8px 0;">Usa descripciones específicas en lugar de genéricas.</p>
                      <p style="margin: 0; color: #ff5252; font-weight: 500;">Ejemplo incorrecto: "Comida"</p>
                      <p style="margin: 8px 0 0 0; color: #4caf50; font-weight: 500;">Ejemplo correcto: "Supermercado -
                        Compra semanal"</p>
                    </div>
                  </div>
                </li>
                <li class="accordion-item animate__animated animate__fadeIn" style="animation-delay: 0.2s;">
                  <a href="#" class="item-link item-content" style="padding-left: 16px;">
                    <div class="item-inner">
                      <div class="item-title" style="display: flex; align-items: center; gap: 8px;">
                        <i class="icon material-icons" style="color: #00bcd4;">event</i>
                        <span>Registra inmediatamente</span>
                      </div>
                    </div>
                  </a>
                  <div class="accordion-item-content">
                    <div class="block" style="padding: 12px 16px 12px 56px; background-color: #f5f5f5;">
                      <p style="margin: 0 0 8px 0;">Registra los gastos tan pronto como ocurran para no olvidar
                        detalles.</p>
                      <p style="margin: 0; color: #4caf50; font-weight: 500;">Usa la aplicación en tu teléfono para
                        registrar gastos en el momento.</p>
                    </div>
                  </div>
                </li>
                <li class="accordion-item animate__animated animate__fadeIn" style="animation-delay: 0.3s;">
                  <a href="#" class="item-link item-content" style="padding-left: 16px;">
                    <div class="item-inner">
                      <div class="item-title" style="display: flex; align-items: center; gap: 8px;">
                        <i class="icon material-icons" style="color: #00bcd4;">category</i>
                        <span>Categoriza tus gastos</span>
                      </div>
                    </div>
                  </a>
                  <div class="accordion-item-content">
                    <div class="block" style="padding: 12px 16px 12px 56px; background-color: #f5f5f5;">
                      <p style="margin: 0 0 8px 0;">Agrupa gastos similares para identificar patrones:</p>
                      <ul style="margin: 8px 0 0 16px; padding: 0; list-style-type: disc;">
                        <li>Alimentación</li>
                        <li>Transporte</li>
                        <li>Servicios</li>
                        <li>Entretenimiento</li>
                        <li>Hogar</li>
                      </ul>
                    </div>
                  </div>
                </li>
                <li class="accordion-item animate__animated animate__fadeIn" style="animation-delay: 0.4s;">
                  <a href="#" class="item-link item-content" style="padding-left: 16px;">
                    <div class="item-inner">
                      <div class="item-title" style="display: flex; align-items: center; gap: 8px;">
                        <i class="icon material-icons" style="color: #00bcd4;">attach_money</i>
                        <span>Establece un límite diario</span>
                      </div>
                    </div>
                  </a>
                  <div class="accordion-item-content">
                    <div class="block" style="padding: 12px 16px 12px 56px; background-color: #f5f5f5;">
                      <p style="margin: 0 0 8px 0;">Define un presupuesto diario realista y la aplicación te alertará
                        cuando te acerques o lo superes.</p>
                      <p style="margin: 0; color: #4caf50; font-weight: 500;">Puedes ajustar este límite en cualquier
                        momento.</p>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>

          <!-- Sección de análisis -->
          <div class="block animate__animated animate__fadeInUp animate__delay-2s" style="margin-top: 24px;">
            <h3
              style="color: #00bcd4; margin: 0 0 12px 16px; font-size: 18px; display: flex; align-items: center; gap: 8px;">
              <i class="icon material-icons">analytics</i>
              <span>Analiza tus Gastos</span>
            </h3>
            <div class="list" style="margin: 0; border-radius: 12px; overflow: hidden;">
              <ul>
                <li class="item-content tip-item animate__animated animate__fadeIn"
                  style="padding: 16px; animation-delay: 0.1s;">
                  <div class="item-inner" style="display: flex; align-items: flex-start;">
                    <i class="icon material-icons"
                      style="color: #4caf50; margin-right: 12px; flex-shrink: 0;">check_circle</i>
                    <div class="item-title"
                      style="font-size: 14px; line-height: 1.5; white-space: normal; word-wrap: break-word;">
                      Revisa semanalmente tus gastos para identificar áreas donde puedes ahorrar.
                    </div>
                  </div>
                </li>
                <li class="item-content tip-item animate__animated animate__fadeIn"
                  style="padding: 16px; animation-delay: 0.2s;">
                  <div class="item-inner" style="display: flex; align-items: flex-start;">
                    <i class="icon material-icons"
                      style="color: #4caf50; margin-right: 12px; flex-shrink: 0;">check_circle</i>
                    <div class="item-title" style="font-size: 14px; line-height: 1.5; white-space: normal;">
                      Compara mes a mes para ver tu progreso en el control de gastos.
                    </div>
                  </div>
                </li>
                <li class="item-content tip-item animate__animated animate__fadeIn"
                  style="padding: 16px; animation-delay: 0.3s;">
                  <div class="item-inner" style="display: flex; align-items: flex-start;">
                    <i class="icon material-icons"
                      style="color: #f39c12; margin-right: 12px; flex-shrink: 0;">warning</i>
                    <div class="item-title" style="font-size: 14px; line-height: 1.5; white-space: normal;">
                      Los gastos pequeños y frecuentes (como cafés o snacks) pueden sumar mucho al final del mes.
                    </div>
                  </div>
                </li>
                <li class="item-content tip-item animate__animated animate__fadeIn"
                  style="padding: 16px; animation-delay: 0.4s;">
                  <div class="item-inner" style="display: flex; align-items: flex-start;">
                    <i class="icon material-icons"
                      style="color: #4caf50; margin-right: 12px; flex-shrink: 0;">check_circle</i>
                    <div class="item-title" style="font-size: 14px; line-height: 1.5; white-space: normal;">
                      Usa los filtros por día, semana o mes para analizar períodos específicos.
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>

          <!-- Ejemplo de gasto bien registrado -->
          <div class="block animate__animated animate__fadeInUp animate__delay-3s" style="margin-top: 24px;">
            <h3
              style="color: #00bcd4; margin: 0 0 12px 16px; font-size: 18px; display: flex; align-items: center; gap: 8px;">
              <i class="icon material-icons">star</i>
              <span>Ejemplo Completo</span>
            </h3>
            <div class="card example-card animate__animated animate__pulse animate__delay-4s"
              style="margin: 0 16px 24px; border-radius: 12px; box-shadow: 0 4px 8px rgba(0,188,212,0.2);">
              <div class="card-content card-content-padding" style="padding: 16px;">
                <div style="display: flex; margin-bottom: 12px; align-items: center;">
                  <div
                    style="width: 60px; height: 60px; border-radius: 12px; background-color: #FF704320; display: flex; align-items: center; justify-content: center; margin-right: 12px;">
                    <i class="material-icons" style="font-size: 28px; color: #FF7043;">shopping_cart</i>
                  </div>
                  <div>
                    <p style="font-weight: 500; margin: 0 0 4px 0; color: #333;">Supermercado - Compra semanal</p>
                    <p style="font-size: 16px; margin: 0; color: #e74c3c; font-weight: bold;">-$85.50</p>
                  </div>
                </div>

                <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-top: 8px;">
                  <span
                    style="background: #FF704320; color: #FF7043; padding: 4px 8px; border-radius: 12px; font-size: 12px;">
                    <i class="icon material-icons"
                      style="font-size: 12px; margin-right: 4px; vertical-align: middle;">category</i>
                    Alimentación
                  </span>
                  <span
                    style="background: #00bcd420; color: #00bcd4; padding: 4px 8px; border-radius: 12px; font-size: 12px;">
                    <i class="icon material-icons"
                      style="font-size: 12px; margin-right: 4px; vertical-align: middle;">event</i>
                    15/08/2025
                  </span>
                </div>

                <div style="margin-top: 12px;">
                  <p style="font-size: 14px; color: #555; margin: 8px 0 0 0;">
                    <i class="icon material-icons"
                      style="font-size: 14px; margin-right: 4px; vertical-align: middle;">description</i>
                    Incluye frutas, verduras, lácteos y productos de limpieza para la semana.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>