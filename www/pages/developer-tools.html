<!-- developer-tools.html -->
<div class="page" data-name="developer-tools">
    <div class="navbar safe-areas safe-areas-top">
        <div class="navbar-inner">
            <div class="left">
                <a href="#" class="link back">
                    <i class="icon material-icons">arrow_back</i>
                </a>
            </div>
            <div class="title">Herramientas Dev</div>
        </div>
    </div>

    <div class="page-content" style="background-color: #f5f7fa;">
        <div class="list" style="margin: 0;">
            <ul>
                <li class="list-group-title"
                    style="background-color: transparent; color: #00bcd4; font-weight: bold; margin-top: 20px;">
                    Notificaciones
                </li>
                <li>
                    <div class="item-content" style="background: white; margin-bottom: 8px; border-radius: 8px;">
                        <div class="item-inner">
                            <div class="item-title" style="color: #0a192f;">Probar notificación</div>
                            <div class="item-after">
                                <a href="#" onclick="window.forceNotificationTest()" class="link"
                                    style="color: #00bcd4;">Probar</a>
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="item-content" style="background: white; margin-bottom: 8px; border-radius: 8px;">
                        <div class="item-inner">
                            <div class="item-title" style="color: #0a192f;">Notificación personalizada</div>
                        </div>
                    </div>
                    <div class="block" style="padding: 0 16px; margin-top: -15px;">
                        <input type="text" id="custom-notif-title" placeholder="Título"
                            style="width: 100%; margin-bottom: 8px; padding: 8px; border: 1px solid #ddd; border-radius: 8px;">
                        <textarea id="custom-notif-message" placeholder="Mensaje"
                            style="width: 100%; height: 80px; border: 1px solid #ddd; border-radius: 8px; padding: 8px;"></textarea>
                        <div class="row" style="margin: 12px 0; padding: 4px 0;">
                            <button class="col button button-fill color-blue" style="margin: 4px; padding: 8px 0;"
                                onclick="sendCustomNotification()">
                                Enviar Notificación
                            </button>
                        </div>
                    </div>
                </li>

                <li class="list-group-title"
                    style="background-color: transparent; color: #00bcd4; font-weight: bold; margin-top: 20px;">
                    Licencias
                </li>
                <li>
                    <div class="item-content" style="background: white; margin-bottom: 8px; border-radius: 8px;">
                        <div class="item-inner">
                            <div class="item-title" style="color: #0a192f;">Generar QR Datos</div>
                            <div class="item-after">
                                <a href="#" onclick="generateDevToolsQR()" class="link"
                                    style="color: #00bcd4;">Generar</a>
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="item-content" style="background: white; margin-bottom: 8px; border-radius: 8px;">
                        <div class="item-inner">
                            <div class="item-title" style="color: #0a192f;">Generar Hash Licencia</div>
                            <div class="item-after">
                                <a href="#" onclick="app.popup.open('#generate-license-popup')" class="link"
                                    style="color: #00bcd4;">Generar</a>
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="item-content" style="background: white; margin-bottom: 8px; border-radius: 8px;">
                        <div class="item-inner">
                            <div class="item-title" style="color: #0a192f;">Activar Licencia</div>
                            <div class="item-after">
                                <a href="#" onclick="app.popup.open('#activate-license-popup')" class="link"
                                    style="color: #00bcd4;">Activar</a>
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="item-content" style="background: white; margin-bottom: 8px; border-radius: 8px;">
                        <div class="item-inner">
                            <div class="item-title" style="color: #0a192f;">Verificar Licencia</div>
                            <div class="item-after">
                                <a href="#" onclick="checkLicenseStatus()" class="link"
                                    style="color: #00bcd4;">Verificar</a>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <!-- Popup para mostrar QR de datos del dispositivo -->
    <div class="popup" id="device-qr-popup">
        <div class="view">
            <div class="page">
                <div class="navbar">
                    <div class="navbar-inner">
                        <div class="title">Datos del Dispositivo</div>
                        <div class="right">
                            <a href="#" class="link popup-close">
                                <i class="icon material-icons">close</i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="page-content">
                    <div class="block text-align-center">
                        <div id="qr-license-container-dev" style="margin: 20px 0;"></div>
                        <div class="row" style="justify-content: center;">
                            <button onclick="copyDevToolsQRImage()" class="button button-small color-blue">
                                <i class="icon material-icons">content_copy</i> Copiar QR
                            </button>
                            <button onclick="copyDeviceData()" class="button button-small color-blue">
                                <i class="icon material-icons">content_copy</i> Copiar Datos
                            </button>
                        </div>
                        <p class="text-color-gray" style="font-size: 12px; margin-top: 15px;">
                            Escanee este QR o copie los datos para generar la licencia
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Popup para generar hash de licencia -->
    <div class="popup" id="generate-license-popup">
        <div class="view">
            <div class="page">
                <div class="navbar">
                    <div class="navbar-inner">
                        <div class="title">Generar Hash de Licencia</div>
                        <div class="right">
                            <a href="#" class="link popup-close">
                                <i class="icon material-icons">close</i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="page-content">
                    <div class="block">
                        <div class="list no-hairlines">
                            <ul>
                                <li class="item-content item-input">
                                    <div class="item-inner">
                                        <div class="item-title item-label">Datos del Dispositivo (JSON)</div>
                                        <div class="item-input-wrap">
                                            <textarea id="license-data-input"
                                                placeholder='Ejemplo: {"deviceId":"ABC123","validUntil":1735689600000}'
                                                style="height: 150px; font-family: monospace;"></textarea>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <div class="block">
                            <button onclick="generateLicenseHash()" class="button button-fill color-blue">
                                Generar Hash
                            </button>
                        </div>

                        <div class="block" id="hash-result-container" style="display: none;">
                            <div class="list no-hairlines">
                                <ul>
                                    <li class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title">Hash Generado</div>
                                            <div class="item-after">
                                                <a href="#" onclick="copyToClipboard('license-hash-output')"
                                                    class="button button-small">
                                                    <i class="icon material-icons">content_copy</i>
                                                </a>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                            <textarea id="license-hash-output" readonly
                                style="width: 100%; height: 100px; margin-top: 10px; font-family: monospace;"></textarea>
                            <p class="text-color-gray" style="font-size: 12px;">
                                Copie este hash para activar la licencia en otro dispositivo
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Popup para activar licencia con hash -->
    <div class="popup" id="activate-license-popup">
        <div class="view">
            <div class="page">
                <div class="navbar">
                    <div class="navbar-inner">
                        <div class="title">Activar Licencia</div>
                        <div class="right">
                            <a href="#" class="link popup-close">
                                <i class="icon material-icons">close</i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="page-content">
                    <div class="block">
                        <div class="list no-hairlines">
                            <ul>
                                <li class="item-content item-input">
                                    <div class="item-inner">
                                        <div class="item-title item-label">Hash de Licencia</div>
                                        <div class="item-input-wrap">
                                            <textarea id="license-hash-input"
                                                placeholder="Pegue aquí el hash de licencia generado"
                                                style="height: 150px; font-family: monospace;"></textarea>
                                        </div>
                                    </div>
                                </li>
                            </ul>
                        </div>

                        <div class="block">
                            <button onclick="activateLicense()" class="button button-fill color-blue">
                                Activar Licencia
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Popup para estado de licencia -->
    <div class="popup" id="license-status-popup">
        <div class="view">
            <div class="page">
                <div class="navbar">
                    <div class="navbar-inner">
                        <div class="title">Estado de Licencia</div>
                        <div class="right">
                            <a href="#" class="link popup-close">
                                <i class="icon material-icons">close</i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="page-content">
                    <div class="block">
                        <div class="card" style="margin: 0;">
                            <div class="card-content card-content-padding text-align-center">
                                <i class="icon material-icons" style="font-size: 48px; color: #34c759;">verified</i>
                                <h3 style="margin: 8px 0;">Licencia Activa</h3>
                            </div>
                            <div class="list no-hairlines">
                                <ul>
                                    <li class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title">Dispositivo</div>
                                            <div class="item-after" id="license-status-device"></div>
                                        </div>
                                    </li>
                                    <li class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title">Expira</div>
                                            <div class="item-after" id="license-status-expiration"></div>
                                        </div>
                                    </li>
                                    <li class="item-content">
                                        <div class="item-inner">
                                            <div class="item-title">Días restantes</div>
                                            <div class="item-after" id="license-status-days"></div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>